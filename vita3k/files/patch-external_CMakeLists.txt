--- external/CMakeLists.txt.orig	2025-04-23 19:43:02 UTC
+++ external/CMakeLists.txt
@@ -7,29 +7,29 @@ set(CMAKE_POLICY_DEFAULT_CMP0077 "NEW")
 # created or updated and is ignored if it exists.
 set(CMAKE_POLICY_DEFAULT_CMP0077 "NEW")
 
-function(check_submodules_present)
-	file(READ "${CMAKE_SOURCE_DIR}/.gitmodules" gitmodules)
-	string(REGEX MATCHALL "path *= *[^ \t\r\n]*" gitmodules ${gitmodules})
+#function(check_submodules_present)
+#	file(READ "${CMAKE_SOURCE_DIR}/.gitmodules" gitmodules)
+#	string(REGEX MATCHALL "path *= *[^ \t\r\n]*" gitmodules ${gitmodules})
+#
+#	foreach(module ${gitmodules})
+#		# Get module name
+#		string(REGEX REPLACE "path *= *" "" module ${module})
+#
+#		# Stat the folder and get amount of entries
+#		file(GLOB RESULT "${CMAKE_SOURCE_DIR}/${module}/*")
+#		list(LENGTH RESULT RES_LEN)
+#
+#		# If the module has no files, bring fatal error
+#		if(RES_LEN EQUAL 0)
+#			# directory is empty
+#			message(FATAL_ERROR "Submodule ${module} is empty. "
+#				"Please run: git submodule update --init --recursive")
+#		endif()
+#	endforeach()
+#endfunction()
+#
+#check_submodules_present()
 
-	foreach(module ${gitmodules})
-		# Get module name
-		string(REGEX REPLACE "path *= *" "" module ${module})
-
-		# Stat the folder and get amount of entries
-		file(GLOB RESULT "${CMAKE_SOURCE_DIR}/${module}/*")
-		list(LENGTH RESULT RES_LEN)
-
-		# If the module has no files, bring fatal error
-		if(RES_LEN EQUAL 0)
-			# directory is empty
-			message(FATAL_ERROR "Submodule ${module} is empty. "
-				"Please run: git submodule update --init --recursive")
-		endif()
-	endforeach()
-endfunction()
-
-check_submodules_present()
-
 # Set folder for external projects (for project tree in IDE)
 set(CMAKE_FOLDER externals)
 
@@ -381,7 +381,7 @@ option(XXH_X86DISPATCH_ALLOW_AVX "Allow building XXH3 
 option(BUILD_SHARED_LIBS "Build shared library" OFF)
 option(XXHASH_BUILD_XXHSUM "Build the xxhsum binary" OFF)
 option(XXH_X86DISPATCH_ALLOW_AVX "Allow building XXH3 with AVX even if it crashes on SSE2-Only CPUs" OFF)
-if(NOT APPLE)
+if(NOT APPLE OR NOT UNIX)
 	set(DISPATCH 1)
 endif()
 add_subdirectory(xxHash/cmake_unofficial EXCLUDE_FROM_ALL)
